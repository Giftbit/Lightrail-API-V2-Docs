{
  "calls": [
    {
      "callId": "createCurrency1",
      "method": "POST",
      "endpoint": "/currencies",
      "body": {
        "code": "USD",
        "name": "US Dollars",
        "symbol": "$",
        "decimalPlaces": 2
      }
    },
    {
      "callId": "listCurrencies1",
      "method": "GET",
      "endpoint": "/currencies"
    },
    {
      "callId": "createContact1",
      "method": "POST",
      "endpoint": "/contacts",
      "body": {
        "id": "id_JeffreyLebowski_rn1",
        "firstName": "Jeffrey",
        "lastName": "Lebowski",
        "email": "thedude@example.com",
        "metadata": {
          "alias": "El Duderino"
        }
      }
    },
    {
      "callId": "listContacts1",
      "method": "GET",
      "endpoint": "/contacts"
    },
    {
      "callId": "updateContact1",
      "method": "PATCH",
      "endpoint": "/contacts/{REQUEST_REPLACEMENT:createContact1.body.id}",
      "body": {
        "firstName": "The Dude",
        "metadata": {
          "alias": "El Duderino",
          "note": "Into the whole 'brevity thing'"
        }
      }
    },
    {
      "callId": "createProgram1",
      "method": "POST",
      "endpoint": "/programs",
      "body": {
        "id": "spring-promotion-usd_rn1",
        "name": "Spring Promotion USD",
        "currency": "USD",
        "pretax": true,
        "discount": true,
        "fixedInitialBalances": [
          500
        ]
      }
    },
    {
      "callId": "listPrograms1",
      "method": "GET",
      "endpoint": "/programs"
    },
    {
      "callId": "updateProgram1",
      "method": "PATCH",
      "endpoint": "/programs/{REQUEST_REPLACEMENT:createProgram1.body.id}",
      "body": {
        "name": "Spring Promo US Dollars"
      }
    },
    {
      "callId": "createValue1",
      "method": "POST",
      "endpoint": "/values",
      "body": {
        "id": "value1-_rn1",
        "programId": "{REQUEST_REPLACEMENT:createProgram1.body.id}",
        "balance": 500
      }
    },
    {
      "callId": "attachValue1",
      "method": "POST",
      "endpoint": "/contacts/{REQUEST_REPLACEMENT:createContact1.body.id}/values/attach",
      "body": {
        "valueId": "{REQUEST_REPLACEMENT:createValue1.body.id}"
      }
    },
    {
      "callId": "listContactsValue1",
      "method": "GET",
      "endpoint": "/contacts/{REQUEST_REPLACEMENT:createContact1.body.id}/values"
    },
    {
      "callId": "updateValue1",
      "method": "PATCH",
      "endpoint": "/values/{REQUEST_REPLACEMENT:createValue1.body.id}",
      "body": {
        "frozen": true
      }
    },
    {
      "callId": "createValue2ForTransactions",
      "method": "POST",
      "endpoint": "/values",
      "body": {
        "id": "value2-_rn1",
        "currency": "USD",
        "balance": 500
      }
    },
    {
      "callId": "creditTransaction1",
      "method": "POST",
      "endpoint": "/transactions/credit",
      "body": {
        "id": "credit1-_rn1",
        "destination": {
          "rail": "lightrail",
          "valueId": "{REQUEST_REPLACEMENT:createValue2ForTransactions.body.id}"
        },
        "amount": 2500,
        "currency": "USD",
        "metadata": {
          "note": "Frequent buyer bonus"
        }
      }
    },
    {
      "callId": "debitTransaction1",
      "method": "POST",
      "endpoint": "/transactions/debit",
      "body": {
        "id": "debit1-_rn1",
        "source": {
          "rail": "lightrail",
          "valueId": "{REQUEST_REPLACEMENT:createValue2ForTransactions.body.id}"
        },
        "amount": 1000,
        "currency": "USD",
        "metadata": {
          "note": "Reduce loyalty points after 3mo contact inactivity"
        }
      }
    },
    {
      "callId": "listTransactions1",
      "method": "GET",
      "endpoint": "/transactions"
    },
    {
      "callId": "createValue1ForCheckoutExample",
      "method": "POST",
      "endpoint": "/values",
      "body": {
        "id": "valueForCheckout1-_rn1",
        "currency": "USD",
        "balance": 2000
      }
    },
    {
      "callId": "createValue2ForCheckoutExample",
      "method": "POST",
      "endpoint": "/values",
      "body": {
        "id": "valueForCheckout2-_rn1",
        "currency": "USD",
        "balance": 50,
        "discount": true,
        "pretax": true,
        "redemptionRule": {
          "rule": "currentLineItem.productId == 'chocolate_bar'",
          "explanation": "$0.50 off a chocolate bar"
        }
      }
    },
    {
      "callId": "createValue3ForCheckoutExample",
      "method": "POST",
      "endpoint": "/values",
      "body": {
        "id": "valueForCheckout3-_rn1",
        "currency": "USD",
        "discount": true,
        "pretax": true,
        "redemptionRule": {
          "rule": "currentLineItem.productId == 'socks'",
          "explanation": "20% off socks"
        },
        "valueRule": {
          "rule": "currentLineItem.lineTotal.subtotal * 0.20",
          "explanation": "20% off socks"
        }
      }
    },
    {
      "callId": "checkoutExample1",
      "method": "POST",
      "endpoint": "/transactions/checkout",
      "body": {
        "id": "checkoutExample1-_rn1",
        "sources": [
          {
            "rail": "lightrail",
            "valueId": "{REQUEST_REPLACEMENT:createValue1ForCheckoutExample.body.id}"
          },
          {
            "rail": "lightrail",
            "valueId": "{REQUEST_REPLACEMENT:createValue2ForCheckoutExample.body.id}"
          },
          {
            "rail": "lightrail",
            "valueId": "{REQUEST_REPLACEMENT:createValue3ForCheckoutExample.body.id}"
          }
        ],
        "lineItems": [
          {
            "productId": "socks",
            "unitPrice": 500,
            "quantity": 2,
            "taxRate": 0.08
          },
          {
            "productId": "chocolate_bar",
            "unitPrice": 199,
            "taxRate": 0.05
          },
          {
            "productId": "shipping",
            "unitPrice": 349,
            "taxRate": 0.0
          }
        ],
        "currency": "USD"
      }
    },
    {
      "callId": "generateCodeValue1",
      "method": "POST",
      "endpoint": "/values",
      "body": {
        "id": "value3-_rn1",
        "programId": "{REQUEST_REPLACEMENT:createProgram1.body.id}",
        "balance": 500,
        "generateCode": {}
      }
    },
    {
      "callId": "changeGenerateCodeValue1",
      "method": "POST",
      "endpoint": "/values/{REQUEST_REPLACEMENT:generateCodeValue1.body.id}/changeCode",
      "body": {
        "generateCode": {}
      }
    },
    {
      "callId": "valueForTransferSource",
      "method": "POST",
      "endpoint": "/values",
      "body": {
        "id": "value4-_rn1",
        "balance": 500,
        "currency": "USD"
      }
    },
    {
      "callId": "valueForTransferDestination",
      "method": "POST",
      "endpoint": "/values",
      "body": {
        "id": "value5-_rn1",
        "balance": 500,
        "currency": "USD"
      }
    },
    {
      "callId": "transfer",
      "method": "POST",
      "endpoint": "/transactions/transfer",
      "body": {
        "id": "transfer-_rn1",
        "source": {
          "rail": "lightrail",
          "valueId": "{REQUEST_REPLACEMENT:valueForTransferSource.body.id}"
        },
        "destination": {
          "rail": "lightrail",
          "valueId": "{REQUEST_REPLACEMENT:valueForTransferDestination.body.id}"
        },
        "amount": 100,
        "currency": "USD",
        "metadata": {
          "reference": "customer request to move funds. ref: #4948173593"
        }
      }
    }
  ]
}
